= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =
announce[-each][-nomail][-digest] listname filename
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
listname, required, is an email list at this site
filename, required, is the file to distribute
-each,   if specified, limits delivery to subscribers using "set each"
-nomail, if specified, limits delivery to subscribers using "set nomail"
-digest, if specified, limits delivery to subscribers using "set digest"
-unique, if specified, limits delivery to subscribers using "set unique"
= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =

Distribute a file individually to some or all classes of subscribers
of a (full, not auxiliary) mailing list. Each message is sent as a
probe, with the recipient in the "To:" header, so "announce" takes
more resources than "post". This could be used for periodic reminders,
announcements that need to reach 'digest' subscribers immediately, or
just a way to ask 'nomail' subscribers why they are still on the list.

The mode (each, nomail, digest, unique) specifies which class of subscribers
will receive the  message. The default is all classes. (When delivering
an announcement, the "each" and "nomail" classes are used to distinguish
addresses subscribed to one or more lists from those that aren't.)

The file that is distributed is a template that supports keyword
variable substitutions.  The variables supported include the standard 
substitutions, as documented in "help variables", plus \$REQUESTER and 
\$USER.  In addition, any unescaped occurrence of \$MSGRCPT will be replaced 
by the address of the recipient of each copy of the announcement. 
One way this could be used is to include a notice in the announcement
indicating the subscription address, such as:
  You are subscribed to the mj2-dev list as \$MSGRCPT.

The announce command uses \$MSGRCPT to change the To: header of the 
announcement, so it contains the address of the recipient instead of 
the address of the mailing list.  The announce command also lets you 
choose which class of recipients receives the announcement.  For instance,
  announce-nomail listname /expiration
could be used to send a notice about expiring inactive subscriptions to all 
people with postponed subscriptions (the "nomail" setting; see "help set"
for an explanation of the different delivery classes).


See Also:
   help configset_access_rules (to limit access to this command)
   help set (for how to switch subscriptions between delivery classes)
   help variables (for substitutions that can be made in "filename")

For a list of all help topics send this one-line message
   help topics
to the server at $MJ
