= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =
archive-delete   listname pattern
archive-get      listname pattern
archive-get-mime listname pattern
archive-index    listname pattern
archive-stats    listname pattern
archive-sync     listname pattern
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
listname, required, is the name of a regular list at this site
pattern,  required, is a single value or range of values (see below)
= = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =

If a Majordomo mailing list is configured to store messages in
an archive, those messages may be retrieved using "archive-get"
after they are found with the "archive-index" command.

The type of digest for the archive-get command can be specified in
the mode: "archive-get-mime" sends a multi-part MIME message, just
"archive-get" sends plain text. The original format of the messages
shouldn't matter.

Majordomo archives are given names which indicate the dates of
the messages in the archive.  For example, the "test" list's archive
for the month of March, 1999, would be called
  test.199903
Archives may be organized by year, month, week, or day, at the 
discretion of the list owners.

Dates can be specified in two formats, depending on the list settings:
 1. for a given year, month, or day, use "yyyymmdd" as follows:
   1999     for the year  of           1999
   200007   for the month of    July   2000
   20000802 for the day   of 02 August 2000
 2. for a given week, use "yyyymmw" as follows:
   2000011 for the first week of January 2000
NOTE: There is a subtle difference between day and week time periods...
days are always two digits, weeks are always one digit! (this is the
same date syntax found in "help report")

Within each archive, each message will have a number.  For instance,
the seventh message in the March, 1999, archive would have the following
number:
  199903/7

Messages sent to auxiliary lists are also archived, and made available
using the archive command.  For example, the first message sent
to test:bugs in July of 2000 could be retrieved with
   archive-get test bugs.200007/1
where the list name "test" is set off by spaces and the auxiliary list
name "bugs" is separated from the date by a period.

It is possible to retrieve messages (with the "archive-get" command)
or obtain a list of messages, with each message's subject and message
number (using the "archive-index" command).  There are several ways
for you to indicate which messages you want to see, using three kinds
of patterns.

One pattern is a simple message count.  For example,
  archive-index test 20
would retrieve an index of the last 20 messages sent to the "test" list.

Another pattern is a message number.  For example,
  archive-get test 199903/4
would retrieve the fourth message in the March, 1999, archive of
the "test" list.

The final pattern is a number which expresses a date.  The command
  archive-index plum 19990814
would retrieve an index of messages posted to the "plum" list
on August 14, 1999.  Similarly, the command
  archive-get peach 2000021
will cause all of the messages posted to the "peach" list during
the first week of February, 2000, to be sent to you.

These three patterns may be combined to indicate ranges of messages.
The command
  archive-get almond 20000205 - 20000207
would retrieve all messages distributed on the "almond" list
during the 5th, 6th, and 7th of February, 2000.  It is very
important to leave spaces around the hyphen.  The command
  archive-get almond 20000205-20000207
will NOT work.

Any combination of the three patterns may be used.  However, some
of the combinations produce unusual effects.  For example,
  archive-index lime 15 - 3
would retrieve an index of the 15 messages immediately preceding
the third most recent message sent to the "lime" list.

The command
  archive-get lemon 200001/3 - 15
will retrieve the third message in the January, 2000, archive of
the "lemon" list, and 14 messages following it, even if those
messages are found in other archives, such as February, 2000, or
later.

Whereas
  archive-index tangerine 10 - 1998
would retrieve an index of the last 10 messages posted to the
"tangerine" list during 1998, 
  archive-index tangerine 1998 - 10
would retrieve an index of the first 10 messages.

The index and get commands may not allow archive retrieval if
"configset archive_dir" is set to somewhere outside the list's
file space, but they may work if the file system permissions are
set appropriately.

The options "archive-delete" and "archive-sync" are intended only
for use by expert list owners, and "-sync" in particular will be
useful only to those with shell access who wish to hand-edit the
archives (a practice which is possible but discouraged). Both of
these options require an administrative password.

The archive-delete option takes the usual arguments: dates,
message counts, message numbers, and combinations thereof
(as described for "archive-get", above). It can remove all
of the archives for a mailing list with one command, and a
message can be prevented from appearing in a digest by deleting
it, so use this mode with extreme caution.  

The numbers of the remaining messages are not changed. For example,
if message number 200008/2 were deleted,  200008/1 and 200008/3
would be the first two messages in the August 2000 archive.
Deleting a message causes the index and count files to be updated
automatically, so "archive-sync" is not needed after "archive-delete".

The archive-sync command takes one argument, which must be the
date of a particular archive file.  For example,
  archive-sync mj2-dev 200005
would synchronize the May 2000 archive index and counts with the
messages themselves. Any message not containing an X-Archive-Number
header will be given a new number, one greater than the highest
number in the archive, and a new header.  Any archive number that
does not correspond to the archive in question will be replaced by
one that does (in this way, it is possible to combine archives).

List owners can use the "archive-stats" command to get a sorted
report of the number of messages posted by each address to the named
list for the period of time specified by "pattern". For instance,
to find out who posted the most on mj2-dev during September 2000:
  archive-stats mj2-dev 200009


See Also:
   help configset access_rules_variables (set/test for this command)
   help configset archive_dir (to store archives in a non-default dir)
   help configset archive_access (to restrict access to these files)
   help configset archive_index  (to restrict indexing of these files)
   help get   (which may be used in some cases to retrieve archives)
   help index (which may be used to show which archives are available)
   help put   (which is used to create the archive directory)

For a list of all help topics send this one-line message
   help topics
to the server at $MJ
